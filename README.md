# Shell_note
## 特殊符号：
1. '' : 单引号。在单引号中的所有特殊符号，如$和（反引号）都没有特殊含义，单引号括起来的都是普通字符，会原样输出。

2. "" : 双引号。在双引号中特殊字符都没有特殊含义，但是$，`和\例外，分别拥有调用变量的值、引用命令和转义符的含义。

3. `` : 反引号。反引号引起来的是系统命令，在bash中会先执行它。

## 1.变量
### 1.1 系统预定义变量：
常用系统变量：\$HOME、\$PWD、\$SHELL、\$USER等

### 1.2 用户自定义变量
export : 将局部变量升级为全局变量(在父shell中定义的局部变量，使用export命令可以升级为全局变量，即在子shell中也可以使用，但是如果在子shell中修改该变量并进一步使用export命令声明，只会更改在子shell中的值，不会更改父shell中的值)

readonly : 定义只读变量，不能修改，不能清除

unset : 清除之前定义的变量，清除之后，在set | less中消失。（只读变量不能清除）

#### 变量定义规则：
①变量名称可以由字母、数字、下划线组成，但是不能以数字开头，环境变量名建议大写。

②等号两侧不能有空格。

③在bash中，变量默认都是字符串类型，无法直接进行数值计算。

④变量的值如果有空格，需要使用双引号或单引号括起来。

### 1.3 特殊变量
$n : n为数字， $0代表该脚本名称，\$1至\$9代表第一到第九个参数，十以上的参数需要用大括号包含，如${10}

$# : 获取所有输入参数的个数，统计输入参数个数。

$* : 获取命令行中所有的参数，把所有的参数看做一个整体。

\$@ : 获取命令行中所有的参数，和$*不同，\$@把每个参数区分对待。

$? : 最后一次执行命令的返回状态。如果这个变量的值为0，证明上一个命令正确执行；如果这个变量的值为非0（具体哪个数，由命令自己来决定），则证明上一个命令执行不正确。

## 2.运算符
基本语法：“\$((运算式))”或“\$[运算式]”；；；；(推荐使用“\$[运算式]”)

expr : 直接对数字进行计算。例 : expr 1 + 2(注意要有空格)

<mark> 当使用(())双小括号时，数学运算符可以正常使用. <mark>

## 3.条件判断
### 3.1 基本语法：
① test condition : 使用test命令对后面的条件进行判断

② [ condition ] : 注意 condition 前后必须要有空格。 例：[ $a = hello ](除了condition前后的空格，各参数之间也要用空格隔开)

### 3.2常用判断条件：
（1）两个整数之间比较：

-eq 等于 (equal)

-ne 不等于 (not equal)

-lt 小于 (less than)

-le 小于等于 (less equal)

-gt 大于 (greater than)

-ge 大于等于 (greater equal)

注意：如果是字符串之间的比较，用等号"="判断相等；用"!="判断不等

（2）按照文件权限进行判断：

-r 有读的权限(read)

-w 有写的权限(write)

-x 有执行的权限(execute)

(3)按照文件类型进行判断:

-e 文件存在 (existence)

-f 文件存在且是一个常规的文件(file)

-d 文件存在并且是一个目录(directory)

### 3.3多条件判断：
&& ：代表逻辑与。&&表示前一条命令执行成功时，才执行后一条命令。

如果将两条命令放在同一个[]，[ 条件1 -a 条件2 ]

|| : 代表逻辑或。||表示上一条命令执行失败后，才执行下一条命令。

如果将两条命令放在同一个[]，[ 条件1 -o 条件2 ]

## 4.流程控制:
### 4.1 if判断:
<mark> 基本语法： <mark>

①单分支:

    if [ 条件判断式 ];then
        
        程序

    fi

或者

    if [ 条件判断式 ]

    then

        程序

    fi

②多分支

    if [ 条件判断式 ]

    then

        程序

    elif [ 条件判断式 ]

    then

        程序

    else

        程序

    fi

### 4.2case语句
<mark> 基本语法： <mark>

    case $变量名 in

    "值1")

        如果变量的值等于值1，则执行程序1

    ;;

    "值2")

        如果变量的值等于值2，则执行程序2

    ;;

        ...省略其它分支...

    *)

        如果变量的值都不是以上的值，则执行此程序

    ;;

    esac

注意事项：

①case行尾必须为单词"in"，每一个模式匹配必须以右括号“）”结束

②双分号“;;”表示命令序列结束，相当于java中的break。

③最后的“*）”表示默认模式，相当于java中的default。

### 4.3for循环
<mark> 基本语法1： <mark>

    for (( 初始值；循环控制条件；变量条件 ))(习惯上空格空开，但其实并不必要)

    do
        
        程序

    done

<mark> 基本语法2： <mark>

    for 变量 in 值1 值2 值3...

    do

        程序

    done

### 4.4while循环
<mark> 基本语法： <mark>

    while [ 条件判断式 ] 

    do

        程序

    done

## 5.read读取控制台输入
<mark> 基本语法： <mark>

read (选项) (参数)

①选项：

    -p : 指定读取值时的提示符

    -t : 指定读取时等待的时间(秒)如果-t不加表示一直等待

②参数:

    变量 : 指定读取值的变量名

## 6.函数
### 6.1系统函数
#### 6.1.1 basename
<mark> 基本语法： <mark>

    basename [string/pathname] [suffix](功能描述：basename命令会删掉所有的前缀包括最后一个('/')字符，然后将字符串显示出来。

    basename可以理解为取路径里的文件名称

    选项：

    suffix为后缀，如果suffix被指定了，basename会将pathname或string中的suffix去掉。

#### 6.1.2 dirname
<mark> 基本语法： <mark>

    dirname 文件绝对路径 （功能描述：从给定的包含绝对路径的文件名中去除文件名（非目录的部分），然后返回剩下的路径（目录的部分））

    dirname 可以理解为取文件路径的绝对路径名称

### 6.2自定义函数
<mark> 基本语法： <mark>

    [ function ] funname()

    {

        Action;
        [return int;]

    }

return返回值只能处于0-255之间，如果需要返回超出这个范围的值，需要将返回值赋值给一个变量，然后输出变量。

## 7.正则表达式入门
### 7.1常规匹配
一串不包含特殊字符的正则表达式匹配它自己，例如：

cat /etc/passwd | grep atguigu:会匹配所有包含atguigu的行

### 7.2常用特殊字符
    （1）特殊字符：^
    ^匹配一行的开头，例如：
    cat /etc/passwd | grep ^a
    会匹配处所有以a开头的行
    （2）特殊字符：$
    $匹配一行的结束，例如：
    cat /etc/passwd | grep t$
    会匹配处所有以t结尾的行
    （3）特殊字符：.
    .匹配一个任意的字符，例如：
    cat /etc/passwd | grep r..t
    会匹配包含rabt,rbbt,rxdt,root等的所有航
    （4）特殊字符*：
    *不单独使用，他和上一个字符连用，表示匹配上一个字符0次或多次，例如
    cat /etc/passwd | grep ro*t
    会匹配rt,rot,root,rooot,roooot等所有行
    （5）字符区间（中括号）：[]
    [] 表示匹配某一个范围内的一个字符，例如
    [6,8]------------------匹配6或者8
    [0-9]------------------匹配一个0到9的数字
    [0-9]*-----------------匹配任意长度的数字字符串
    [a-z]------------------匹配一个a-z之间的字符
    [a-c,e-f]--------------匹配a-c或者e-f之间的任意字符
    cat /etc/passwd | grep r[a,b,c]*t
    会匹配rt,rat,rbt,rabt,rbact,rabccbaaacbt等等所有行
    （6）特殊字符：\
    \表示转义，并不会单独使用。由于所有特殊字符都有其特定匹配模式，当我们想匹配某一特殊字符本身时（例如，我想找出所有包含'$'的行），就会碰到困难，此时我们就要将转义字符和特殊字符连用，来表示特殊字符本身，例如：
    cat /etc/passwd | grep 'a\$b'
    就会匹配所有包含a$b的行。注意需要使用单引号将表达式引起来。
    (7)+代表匹配1次到n次。
    ？代表匹配0次或1次。

## 8.文本处理工具
### 8.1 cut
cut命令从文件的每一行剪切字节、字符和字段并将这些字节、字符和字段输出。

    （1）基本用法：
    cut [选项参数] filename
    说明：默认分隔符是制表符
    （2）选项参数说明：
    -f 列号，提取第几列
    -d 分隔符，按照指定分隔符分隔列，默认是制表符"\t"
    -c 按字符进行切割 后加n表示取第几列 比如 -c l
### 8.2 awk
一个强大的文本分析工具，把文件逐行的读入，以空格为默认分隔符将每行切片，切开的部分再进行分析处理。

    （1）基本用法：
    awk [选项参数] '/pattern1/{action1} /pattern2/{action2}...' filename
    pattern : 表示awk在数据中查找的命令，就是匹配模式（正则表达式）
    action : 在找到匹配内容时所执行的一系列命令（要对文件做什么处理操作）
    （2）选项参数说明
    -F 指定输入文件分隔符 （相当于使用内置变量 BEGIN{FS=""}）
    （例如：awk 'BEGIN{FS=":"} {print $1 $2}'）
    -v 赋值一个用户定义变量
    （3）awk的内置变量
    FILENAME  文件名
    NR        已读的记录数（行号）
    NF        浏览记录的域的个数（切割后，列的个数）
    例： awk -F : '{print "filename:"FILENAME ",linenum:" NR ",col:"NF}' passwd
    {}qian加END可以在处理完所有行后进行输出，只输出一行

awk中的函数

    substr($4,20)   表示从第4个字段里的第20个字符开始，直到设定的分隔符结束
    substr($3,12,8) 表示从第3个字段的第12个字符开始，截取8个字符结束

### 8.3 sed
sed是一个文件处理工具，本身是一个管道命令，主要以行为单位进行处理，可以将数据行进行替换、新增、选取等特定工作
    
    （1）基本用法
    sed [-nefri] 'command' 输入文本

常用选项：
    -n : 使用安静模式。在一般sed的用法中，所有来自STDIN的资料一般都会被列出到荧屏上。但如果加上-n参数后，则只有经过sed特殊处理的那一行才会被列出来。
    -e : 多点编辑，允许多个脚本指令被执行
    -r : 支持扩展正则+？（）{}
    -f : 直接将sed的动作写在一个档案内，-f filename则可以执行filename内的sed动作
    -i : 直接修改读取的档案内容，而不是荧屏输出

命令选项：

    p     打印匹配行
    =     显示文件行号
    a\    在定位行号后附加新文本信息
    i\    在定位行号后插入新文本信息
    d     删除定位行
    l     显示与八进制ascii代码等价的控制字符
    n     从另一个文本中读文本下一行，并附加在下一行
    g     将模式2粘贴到/pattern n/
    c\    用新文本替换定位文本
    s     使用替换模式替换相应模式
    r     从另一个文本中读文本
    w     写文本到一个文件
    q     第一个模式匹配完成后退出或立即退出
    y     传送字符
    {}    在定位行执行的命令组

### 8.4 seq
seq用于生成从某个数到另外一个数之间的所有整数

例：

    seq 1 10  生成从1到10的数字
    seq 0 1 5 从0开始，间隔为1，到5结束

### 8.5 printf命令
printf命令可以使输出格式化，使输出结果更美观。printf共有四种，分别是%s,%d,%c和%f，其中%s输出一个字符串，%d整形输出，%c输出一个字符，%f输出实数，以小数形式输出。

%-10s指一个宽度为10个字符(-表示左对齐，没有则表示右对齐)，任何字符都会被显示在10个字符宽的字符内，如果不足则自动以空格填充，超过也会将内容全部显示出来。

%-4.2f指格式化为小数，其中.2指保留两位小数。

%02d指格式化为2位整数，如果位数不足则在前面补0。

### 8.6 paste命令

    paste -d -s -file1 file2

选型含义如下：

    -d : 指定分隔符
    -s : 将每个文件合并成行
